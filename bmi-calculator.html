<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMI Calculator & Healthy Gut | LollyPoPdf</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #9370db;
            --primary-dark: #8a2be2;
            --secondary-color: #f0ebff;
            --text-color: #333333;
            --text-light: #6b7280;
            --bg-color: #ffffff;
            --bg-secondary: #f9f9f9;
            --border-radius: 12px;
            --transition: all 0.3s ease;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --header-height: 80px;
            --white: #ffffff;
            --header-text: #6b7280;
            --accent-color: #9370db;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --underweight-color: #3b82f6;
            --normal-color: #10b981;
            --overweight-color: #f59e0b;
            --obese-color: #ef4444;
        }

        .dark-mode {
            --primary-color: #a391f2;
            --primary-dark: #8a2be2;
            --secondary-color: #2d2d2d;
            --text-color: #f0f0f0;
            --text-light: #a0a0a0;
            --bg-color: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            --white: #1a1a1a;
            --header-text: #a0a0a0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: var(--transition);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        ul {
            list-style: none;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: var(--white);
            color: var(--header-text);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }

        .logo-icon {
            position: relative;
            width: 40px;
            height: 40px;
        }

        .logo-circle {
            width: 40px;
            height: 40px;
            border-radius: 40%;
            background: linear-gradient(to bottom right, #9370db, #8a2be2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
        }

        .logo-stem {
            position: absolute;
            bottom: -17px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 17px;
            background-color: #8a2be2;
            border-radius: 0 0 3px 3px;
        }

        .logo-text {
            font-size: 24px;
            font-weight: bold;
            color: #9370db;
        }

        nav ul {
            display: flex;
            gap: 30px;
            list-style: none;
        }

        nav a {
            font-weight: 500;
            position: relative;
            color: var(--header-text);
            padding: 8px 0;
            border-radius: 0;
            transition: var(--transition);
            text-decoration: none;
        }

        nav a:hover {
            color: var(--accent-color);
        }

        nav a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--accent-color);
            transition: width 0.3s ease;
        }

        nav a:hover::after {
            width: 100%;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .email {
            font-size: 14px;
            color: var(--header-text);
        }

        .theme-toggle {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 20px;
            color: var(--header-text);
            padding: 8px;
            border-radius: 50%;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            background-color: #f0ebff;
            color: var(--accent-color);
        }

        .dark-mode .theme-toggle:hover {
            background-color: #2d3748;
            color: var(--accent-color);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--header-text);
        }

        /* Mobile Menu */
        .mobile-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            background-color: var(--white);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 999;
        }

        .dark-mode .mobile-menu {
            background-color: var(--bg-secondary);
        }

        .mobile-menu.active {
            display: block;
        }

        .mobile-menu ul {
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .mobile-menu a {
            display: block;
            padding: 10px 0;
            font-weight: 500;
            color: var(--header-text);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .dark-mode .mobile-menu a {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .mobile-menu a:hover {
            color: var(--accent-color);
        }

        /* Hero Section */
        .hero {
            background-color: var(--secondary-color);
            padding: 60px 0;
            text-align: center;
        }

        .dark-mode .hero {
            background: linear-gradient(135deg, #2a1a4a, #3d2a6d);
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: #000;
        }

        .dark-mode .hero h1 {
            color: var(--text-color);
        }

        .hero p {
            font-size: 1.2rem;
            color: var(--text-color);
            max-width: 700px;
            margin: 0 auto 30px;
        }

        /* How to Use Section */
        .how-to-section {
            padding: 80px 0;
            background-color: var(--bg-color);
        }

        .dark-mode .how-to-section {
            background-color: var(--bg-secondary);
        }

        .section-title {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 40px;
            color: #000000;
        }

        .dark-mode .section-title {
            color: var(--text-color);
        }

        .steps-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 40px;
        }

        .step-box {
            background-color: var(--bg-secondary);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 30px;
            min-height: 200px;
            position: relative;
        }

        .step-number {
            width: 40px;
            height: 40px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            margin-bottom: 15px;
        }

        .step-title {
            font-size: 18px;
            color: #000000;
            margin-bottom: 10px;
        }

        .dark-mode .step-title {
            color: var(--text-color);
        }

        .step-description {
            font-size: 14px;
            color: var(--text-color);
            line-height: 1.6;
        }

        /* Tool Section */
        .tool-section {
            padding: 80px 0;
            background-color: var(--secondary-color);
        }

        .dark-mode .tool-section {
            background: linear-gradient(135deg, #2a1a4a, #3d2a6d);
        }

        .tool-title {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 40px;
            color: #a391f2;
        }

        .dark-mode .tool-title {
            color: #a391f2;
        }

        .tool-container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: var(--bg-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 40px;
        }

        /* Tab Navigation */
        .tab-nav {
            display: flex;
            border-bottom: 1px solid var(--primary-color);
            margin-bottom: 30px;
        }

        .tab-btn {
            padding: 12px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: var(--text-light);
            border-bottom: 3px solid transparent;
            transition: var(--transition);
        }

        .tab-btn.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* BMI Calculator Section */
        .input-container {
            margin-bottom: 30px;
        }

        .input-label {
            display: block;
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 10px;
            color: var(--text-color);
        }

        .input-group {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .input-field {
            flex: 1;
            padding: 12px 15px;
            border-radius: var(--border-radius);
            border: 1px solid var(--primary-color);
            background-color: var(--bg-color);
            color: var(--text-color);
            font-size: 16px;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary-dark);
            box-shadow: 0 0 0 3px rgba(147, 112, 219, 0.2);
        }

        .unit-toggle {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .unit-btn {
            padding: 8px 16px;
            background-color: var(--bg-secondary);
            border: 1px solid var(--primary-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            color: var(--text-color);
        }

        .unit-btn.active {
            background-color: var(--primary-color);
            color: white;
        }

        /* BMI Result Display */
        .bmi-result-container {
            background-color: var(--bg-secondary);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
            display: none;
        }

        .bmi-result-container.active {
            display: block;
        }

        .bmi-value {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .bmi-category {
            font-size: 1.5rem;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .bmi-bar {
            width: 100%;
            height: 20px;
            background-color: #e5e7eb;
            border-radius: 10px;
            margin: 15px 0;
            overflow: hidden;
            position: relative;
        }

        .bmi-progress {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .bmi-scale {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-light);
            margin-top: 5px;
        }

        .bmi-advice {
            margin-top: 20px;
            font-size: 16px;
            line-height: 1.6;
        }

        /* Health Tips Section */
        .health-tips-container {
            margin-top: 30px;
            display: none;
        }

        .health-tips-container.active {
            display: block;
        }

        .health-tips-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .health-tips-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
        }

        .health-tip {
            background-color: var(--bg-secondary);
            border-radius: var(--border-radius);
            padding: 15px;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .health-tip-icon {
            color: var(--primary-color);
            font-size: 18px;
            margin-top: 3px;
        }

        .health-tip-content {
            flex: 1;
        }

        .health-tip-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .health-tip-description {
            font-size: 14px;
            color: var(--text-light);
        }

        /* Voice Control Section */
        .voice-control-container {
            background-color: var(--bg-secondary);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 30px;
            text-align: center;
        }

        .voice-btn {
            padding: 12px 25px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 10px;
            transition: var(--transition);
        }

        .voice-btn:hover {
            background-color: var(--primary-dark);
        }

        .voice-btn.listening {
            background-color: var(--error-color);
            animation: pulse 1.5s infinite;
        }

        .stop-voice-btn {
            padding: 12px 25px;
            background-color: var(--error-color);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 10px;
            transition: var(--transition);
        }

        .stop-voice-btn:hover {
            background-color: #dc2626;
        }

        .pause-voice-btn {
            padding: 12px 25px;
            background-color: var(--warning-color);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 10px;
            transition: var(--transition);
        }

        .pause-voice-btn:hover {
            background-color: #d97706;
        }

        .resume-voice-btn {
            padding: 12px 25px;
            background-color: var(--success-color);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 10px;
            transition: var(--transition);
        }

        .resume-voice-btn:hover {
            background-color: #059669;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .voice-status {
            margin-top: 15px;
            font-size: 14px;
            color: var(--text-light);
            min-height: 20px;
        }

        .voice-commands {
            margin-top: 15px;
            font-size: 14px;
            color: var(--text-light);
            text-align: left;
            background-color: rgba(147, 112, 219, 0.1);
            padding: 15px;
            border-radius: var(--border-radius);
        }

        .voice-commands h4 {
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .voice-commands ul {
            list-style-type: disc;
            padding-left: 20px;
        }

        .voice-commands li {
            margin-bottom: 5px;
        }

        /* Healthy Gut Section */
        .gut-tips-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .gut-tip-card {
            background-color: var(--bg-secondary);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
        }

        .gut-tip-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .gut-tip-content {
            font-size: 14px;
            line-height: 1.6;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 30px;
        }

        .action-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            transition: var(--transition);
            flex: 1;
            min-width: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .calculate-btn {
            background-color: var(--primary-color);
            color: white;
        }

        .calculate-btn:hover {
            background-color: var(--primary-dark);
        }

        .reset-btn {
            background-color: white;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .reset-btn:hover {
            background-color: var(--secondary-color);
        }

        /* Footer */
        footer {
            background-color: #000000;
            color: white;
            padding: 60px 0 80px;
            position: relative;
        }

        .footer-container {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 60px;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            text-decoration: none;
        }

        .footer-logo .logo-icon {
            width: 40px;
            height: 40px;
        }

        .footer-logo .logo-text {
            color: #9370db;
            font-size: 24px;
            font-weight: bold;
        }

        .footer-section h3 {
            color: white;
            font-weight: 600;
            font-size: 20px;
            margin-bottom: 20px;
        }

        .footer-section h4 {
            color: #9370db;
            font-size: 18px;
            margin-bottom: 15px;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: white;
        }

        .footer-links a:hover {
            color: #9370db;
        }

        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .social-icon {
            width: 40px;
            height: 40px;
            background-color: #9370db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .social-icon:hover {
            background-color: #8a2be2;
            transform: translateY(-3px);
        }

        .copyright {
            position: absolute;
            bottom: 10px;
            left: 10px;
            color: #f9f7ff;
            font-size: 12px;
        }

        .footer-line {
            position: absolute;
            bottom: 50px;
            left: 0;
            width: 100%;
            height: 1px;
            background-color: rgba(255, 255, 255, 0.2);
        }

        /* Language Switcher */
        .language-switcher {
            position: fixed;
            bottom: 10px;
            right: 10px;
            z-index: 1000;
        }

        .language-btn {
            background-color: #9370db;
            color: white;
            border: none;
            border-radius: 30px;
            padding: 5px 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .language-dropdown {
            position: absolute;
            bottom: 100%;
            right: 0;
            width: 300px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 20px;
            display: none;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
        }

        .dark-mode .language-dropdown {
            background-color: var(--bg-secondary);
        }

        .language-switcher:hover .language-dropdown {
            display: grid;
        }

        .language-option {
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            text-align: center;
            font-size: 14px;
        }

        .language-option:hover {
            background-color: white;
            color: #9370db;
        }

        .dark-mode .language-option:hover {
            background-color: var(--bg-color);
        }

        /* Input with unit indicator */
        .input-with-unit {
            position: relative;
            flex: 1;
        }

        .input-with-unit .input-field {
            width: 100%;
            padding-right: 50px;
        }

        .unit-indicator {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
            font-size: 14px;
            pointer-events: none;
        }

        /* New Styles for Enhanced Features */
        .input-label-with-unit {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .unit-btn-small {
            padding: 4px 8px;
            background-color: var(--bg-secondary);
            border: 1px solid var(--primary-color);
            border-radius: 4px;
            cursor: pointer;
            color: var(--text-color);
            font-size: 12px;
        }

        .unit-btn-small.active {
            background-color: var(--primary-color);
            color: white;
        }

        .bmi-chart-container {
            margin: 30px 0;
            background-color: var(--bg-secondary);
            border-radius: var(--border-radius);
            padding: 20px;
        }

        .ideal-weight-container {
            background-color: var(--bg-secondary);
            border-radius: var(--border-radius);
            padding: 20px;
            margin: 20px 0;
        }

        .ideal-weight-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .ideal-weight-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--text-color);
        }

        .history-container {
            background-color: var(--bg-secondary);
            border-radius: var(--border-radius);
            padding: 20px;
            margin: 20px 0;
        }

        .history-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .history-list {
            max-height: 200px;
            overflow-y: auto;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }

        .dark-mode .history-item {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .history-date {
            font-size: 14px;
            color: var(--text-light);
        }

        .history-bmi {
            font-weight: bold;
        }

        .clear-history-btn {
            background-color: var(--error-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 12px;
            cursor: pointer;
            margin-top: 10px;
            font-size: 14px;
        }

        .clear-history-btn:hover {
            background-color: #dc2626;
        }

        /* Responsive Styles */
        @media (max-width: 992px) {
            .steps-container {
                grid-template-columns: 1fr;
            }
            
            .footer-container {
                grid-template-columns: 1fr 1fr;
            }
            
            .input-group {
                flex-direction: column;
            }
        }

        @media (max-width: 768px) {
            nav ul, .email {
                display: none;
            }
            
            .mobile-menu-btn {
                display: block;
            }
            
            .hero h1, .tool-title {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .language-dropdown {
                width: 250px;
                grid-template-columns: repeat(2, 1fr);
            }
            
            .footer-container {
                grid-template-columns: 1fr;
                gap: 40px;
            }
            
            .gut-tips-container {
                grid-template-columns: 1fr;
            }
            
            .tab-nav {
                flex-direction: column;
            }
            
            .tab-btn {
                width: 100%;
                text-align: center;
            }
        }

        @media (max-width: 576px) {
            .tool-container {
                padding: 20px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .action-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="https://lollypopdf.com" class="logo">
                <div class="logo-icon">
                    <div class="logo-circle">LPdf</div>
                    <div class="logo-stem"></div>
                </div>
                <span class="logo-text">LollyPoPdf</span>
            </a>
            
            <nav>
                <ul>
                    <li><a href="https://lollypopdf.github.io/LollyPoPdf#home" class="nav-link" data-i18n="nav.home">Home</a></li>
                    <li><a href="https://lollypopdf.github.io/LollyPoPdf#about" class="nav-link" data-i18n="nav.about">About Us</a></li>
                    <li><a href="https://lollypopdf.github.io/LollyPoPdf#tools" class="nav-link" data-i18n="nav.tools">Tools</a></li>
                    <li><a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a></li>
                </ul>
            </nav>
            
            <div class="header-right">
                <span class="email">lollypoppdf@gmail.com</span>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobileMenu">
            <ul>
                <li><a href="https://lollypopdf.github.io/LollyPoPdf#home" class="nav-link" data-i18n="nav.home">Home</a></li>
                <li><a href="https://lollypopdf.github.io/LollyPoPdf#about" class="nav-link" data-i18n="nav.about">About Us</a></li>
                <li><a href="https://lollypopdf.github.io/LollyPoPdf#tools" class="nav-link" data-i18n="nav.tools">Tools</a></li>
                <li><a href="contact.html" class="nav-link" data-i18n="nav.contact">Contact</a></li>
            </ul>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1 data-i18n="hero.title">BMI Calculator & Healthy Gut</h1>
            <p data-i18n="hero.description">Calculate your BMI in real-time, get personalized health advice, and learn how to improve your gut health. All processing happens locally with complete privacy.</p>
        </div>
    </section>

    <!-- How to Use Section -->
    <section class="how-to-section">
        <div class="container">
            <h2 class="section-title" data-i18n="howto.title">How to Use the Health Tool</h2>
            <div class="steps-container">
                <div class="step-box">
                    <div class="step-number">1</div>
                    <h3 class="step-title" data-i18n="howto.step1.title">Calculate Your BMI</h3>
                    <p class="step-description" data-i18n="howto.step1.description">Enter your height and weight using either metric or imperial units. The tool will instantly calculate your BMI and show your health category.</p>
                </div>
                <div class="step-box">
                    <div class="step-number">2</div>
                    <h3 class="step-title" data-i18n="howto.step2.title">Use Voice Control</h3>
                    <p class="step-description" data-i18n="howto.step2.description">Click the microphone button and speak your measurements. The tool will recognize your voice and input the values automatically.</p>
                </div>
                <div class="step-box">
                    <div class="step-number">3</div>
                    <h3 class="step-title" data-i18n="howto.step3.title">Get Health Advice</h3>
                    <p class="step-description" data-i18n="howto.step3.description">Based on your BMI, receive personalized advice for improving your health, with a special focus on gut health and overall wellness.</p>
                </div>
                <div class="step-box">
                    <div class="step-number">4</div>
                    <h3 class="step-title" data-i18n="howto.step4.title">Learn About Gut Health</h3>
                    <p class="step-description" data-i18n="howto.step4.description">Explore our collection of gut health tips and lifestyle recommendations to improve your digestive health and overall well-being.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Tool Section -->
    <section class="tool-section">
        <div class="container">
            <h2 class="tool-title" data-i18n="tool.title">BMI Calculator & Healthy Gut</h2>
            <div class="tool-container">
                <!-- Tab Navigation -->
                <div class="tab-nav">
                    <button class="tab-btn active" data-tab="bmi">
                        <i class="fas fa-calculator"></i> <span data-i18n="tool.tabs.bmi">BMI Calculator</span>
                    </button>
                    <button class="tab-btn" data-tab="gut">
                        <i class="fas fa-heartbeat"></i> <span data-i18n="tool.tabs.gut">Healthy Gut</span>
                    </button>
                </div>

                <!-- BMI Calculator Tab -->
                <div class="tab-content active" id="bmi">
                    <div class="unit-toggle">
                        <button class="unit-btn active" id="metricBtn">Metric (kg/cm)</button>
                        <button class="unit-btn" id="imperialBtn">Imperial (lbs/ft/in)</button>
                    </div>

                    <!-- Metric Inputs -->
                    <div id="metricInputs">
                        <div class="input-group">
                            <div class="input-with-unit">
                                <div class="input-label-with-unit">
                                    <label for="weightKg" class="input-label" data-i18n="tool.bmi.weight">Weight:</label>
                                    <button class="unit-btn-small active" data-unit="kg">kg</button>
                                    <button class="unit-btn-small" data-unit="lbs">lbs</button>
                                </div>
                                <input type="number" id="weightKg" class="input-field" placeholder="Enter weight" min="1" max="300">
                                <span class="unit-indicator">kg</span>
                            </div>
                            <div class="input-with-unit">
                                <div class="input-label-with-unit">
                                    <label for="heightCm" class="input-label" data-i18n="tool.bmi.height">Height:</label>
                                    <button class="unit-btn-small active" data-unit="cm">cm</button>
                                    <button class="unit-btn-small" data-unit="ft">ft</button>
                                </div>
                                <input type="number" id="heightCm" class="input-field" placeholder="Enter height" min="50" max="250">
                                <span class="unit-indicator">cm</span>
                            </div>
                        </div>
                    </div>

                    <!-- Imperial Inputs -->
                    <div id="imperialInputs" style="display: none;">
                        <div class="input-group">
                            <div class="input-with-unit">
                                <div class="input-label-with-unit">
                                    <label for="weightLbs" class="input-label" data-i18n="tool.bmi.weight">Weight:</label>
                                    <button class="unit-btn-small" data-unit="kg">kg</button>
                                    <button class="unit-btn-small active" data-unit="lbs">lbs</button>
                                </div>
                                <input type="number" id="weightLbs" class="input-field" placeholder="Enter weight" min="1" max="660">
                                <span class="unit-indicator">lbs</span>
                            </div>
                        </div>
                        <div class="input-group">
                            <div class="input-with-unit">
                                <div class="input-label-with-unit">
                                    <label for="heightFt" class="input-label" data-i18n="tool.bmi.height">Height:</label>
                                    <button class="unit-btn-small" data-unit="cm">cm</button>
                                    <button class="unit-btn-small active" data-unit="ft">ft</button>
                                </div>
                                <input type="number" id="heightFt" class="input-field" placeholder="Feet" min="1" max="8">
                                <span class="unit-indicator">ft</span>
                            </div>
                            <div class="input-with-unit">
                                <label for="heightIn" class="input-label" data-i18n="tool.bmi.height">Inches:</label>
                                <input type="number" id="heightIn" class="input-field" placeholder="Inches" min="0" max="11">
                                <span class="unit-indicator">in</span>
                            </div>
                        </div>
                    </div>

                    <!-- Voice Control -->
                    <div class="voice-control-container">
                        <h3 data-i18n="tool.voice.title">Voice Control</h3>
                        <p data-i18n="tool.voice.description">Click the microphone and speak your measurements</p>
                        <button class="voice-btn" id="voiceBtn">
                            <i class="fas fa-microphone"></i> <span data-i18n="tool.voice.start">Start Voice Input</span>
                        </button>
                        <button class="stop-voice-btn" id="stopVoiceBtn" style="display: none;">
                            <i class="fas fa-stop"></i> <span data-i18n="tool.voice.stop">Stop Voice Input</span>
                        </button>
                        <button class="pause-voice-btn" id="pauseVoiceBtn" style="display: none;">
                            <i class="fas fa-pause"></i> <span data-i18n="tool.voice.pause">Pause Output</span>
                        </button>
                        <button class="resume-voice-btn" id="resumeVoiceBtn" style="display: none;">
                            <i class="fas fa-play"></i> <span data-i18n="tool.voice.resume">Resume Output</span>
                        </button>
                        <div class="voice-status" id="voiceStatus"></div>
                        
                        <div class="voice-commands">
                            <h4>Voice Commands Examples:</h4>
                            <ul>
                                <li><strong>Metric:</strong> "My weight is 70 kilograms and height is 175 centimeters"</li>
                                <li><strong>Imperial:</strong> "My weight is 150 pounds and height is 5 feet 9 inches"</li>
                                <li><strong>Simple:</strong> "70 kilograms 175 centimeters" or "150 pounds 5 feet 9 inches"</li>
                                <li><strong>Calculate:</strong> "Calculate my BMI"</li>
                                <li><strong>Reset:</strong> "Reset the form"</li>
                            </ul>
                        </div>
                    </div>

                    <!-- BMI Result -->
                    <div class="bmi-result-container" id="bmiResult">
                        <div class="bmi-value" id="bmiValue">--</div>
                        <div class="bmi-category" id="bmiCategory">--</div>
                        <div class="bmi-bar">
                            <div class="bmi-progress" id="bmiProgress"></div>
                        </div>
                        <div class="bmi-scale">
                            <span>Underweight</span>
                            <span>Normal</span>
                            <span>Overweight</span>
                            <span>Obese</span>
                        </div>
                        <div class="bmi-advice" id="bmiAdvice"></div>
                    </div>

                    <!-- Ideal Weight Range -->
                    <div class="ideal-weight-container" id="idealWeightContainer" style="display: none;">
                        <h3 class="ideal-weight-title">Ideal Weight Range</h3>
                        <div class="ideal-weight-value" id="idealWeightValue"></div>
                    </div>

                    <!-- BMI Chart -->
                    <div class="bmi-chart-container" id="bmiChartContainer" style="display: none;">
                        <canvas id="bmiChart"></canvas>
                    </div>

                    <!-- BMI History -->
                    <div class="history-container" id="historyContainer" style="display: none;">
                        <h3 class="history-title">BMI History</h3>
                        <div class="history-list" id="historyList">
                            <!-- History items will be added here -->
                        </div>
                        <button class="clear-history-btn" id="clearHistoryBtn">Clear History</button>
                    </div>

                    <!-- Health Tips -->
                    <div class="health-tips-container" id="healthTips">
                        <h3 class="health-tips-title" data-i18n="tool.tips.title">Personalized Health Tips</h3>
                        <div class="health-tips-list" id="healthTipsList">
                            <!-- Tips will be dynamically added here -->
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button class="action-btn calculate-btn" id="calculateBtn">
                            <i class="fas fa-calculator"></i> <span data-i18n="tool.bmi.calculate">Calculate BMI</span>
                        </button>
                        <button class="action-btn reset-btn" id="resetBtn">
                            <i class="fas fa-redo"></i> <span data-i18n="tool.bmi.reset">Reset</span>
                        </button>
                    </div>
                </div>

                <!-- Healthy Gut Tab -->
                <div class="tab-content" id="gut">
                    <h3 data-i18n="tool.gut.title">Improve Your Gut Health</h3>
                    <p data-i18n="tool.gut.description">A healthy gut is essential for overall wellness. Here are some tips to improve your digestive health:</p>
                    
                    <div class="gut-tips-container" id="dynamicGutTips">
                        <!-- Dynamic gut tips will be loaded here based on BMI -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container footer-container">
            <!-- Left Section -->
            <div class="footer-section">
                <a href="https://lollypopdf.com" class="footer-logo">
                    <div class="logo-icon">
                        <div class="logo-circle">LPdf</div>
                        <div class="logo-stem"></div>
                    </div>
                    <span class="logo-text">LollyPoPdf</span>
                </a>
                <h3 data-i18n="footer.follow">FOLLOW US</h3>
                <div class="social-icons">
                    <a href="https://facebook.com/lollypopdf" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                    <a href="https://linkedin.com/company/lollypopdf" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
                    <a href="https://twitter.com/lollypopdf" class="social-icon"><i class="fab fa-twitter"></i></a>
                    <a href="https://instagram.com/lollypopdf" class="social-icon"><i class="fab fa-instagram"></i></a>
                    <a href="https://pinterest.com/lollypopdf" class="social-icon"><i class="fab fa-pinterest-p"></i></a>
                    <a href="https://youtube.com/@lollypopdf" class="social-icon"><i class="fab fa-youtube"></i></a>
                    <a href="https://www.trustpilot.com/review/lollypopdf.com" class="social-icon"><i class="fas fa-star"></i></a>
                </div>
            </div>
            
            <!-- Middle Section - Popular Categories -->
            <div class="footer-section">
                <h4 data-i18n="footer.categories">Popular Categories</h4>
                <ul class="footer-links">
                    <li><a href="https://lollypopdf.com#pdf-tools" data-i18n="footer.categories.pdf">PDF Tools</a></li>
                    <li><a href="https://lollypopdf.com#image-tools" data-i18n="footer.categories.image">Image Tools</a></li>
                    <li><a href="https://lollypopdf.com#text-tools" data-i18n="footer.categories.text">Text Tools</a></li>
                    <li><a href="https://lollypopdf.com#audio-video-tools" data-i18n="footer.categories.av">Audio/Video Tools</a></li>
                    <li><a href="https://lollypopdf.com#web-developer-tools" data-i18n="footer.categories.web">WebDeveloper Tools</a></li>
                    <li><a href="https://lollypopdf.com#calculator-tools" data-i18n="footer.categories.calc">Calculator Tools</a></li>
                    <li><a href="https://lollypopdf.com#utility-tools" data-i18n="footer.categories.util">Utility Tools</a></li>
                    <li><a href="https://lollypopdf.com#color-tools" data-i18n="footer.categories.color">Color Tools</a></li>
                </ul>
            </div>
            
            <!-- Right Section - Quick Links -->
            <div class="footer-section">
                <h4 data-i18n="footer.quicklinks">Quick Links</h4>
                <ul class="footer-links">
                    <li><a href="https://lollypopdf.github.io/LollyPoPdf#home" data-i18n="nav.home">Home</a></li>
                    <li><a href="https://lollypopdf.github.io/LollyPoPdf#tools" data-i18n="footer.links.tools">All Tools</a></li>
                    <li><a href="faq.html" data-i18n="footer.links.faq">FAQ</a></li>
                    <li><a href="contact.html" data-i18n="footer.links.contact">Contact</a></li>
                    <li><a href="privacy-policy.html" data-i18n="footer.links.privacy">Privacy Policy</a></li>
                    <li><a href="disclaimer.html" data-i18n="footer.links.disclaimer">Disclaimer</a></li>
                    <li><a href="terms.html" data-i18n="footer.links.terms">Terms of Service</a></li>
                </ul>
            </div>
        </div>
        
        <div class="footer-line"></div>
        <div class="copyright" data-i18n="footer.copyright">© 2025 LollyPoPDF. All rights reserved.</div>
    </footer>

    <!-- Language Switcher -->
    <div class="language-switcher">
        <button class="language-btn">
            <i class="fas fa-globe"></i>
            <span id="currentLanguage">English</span>
        </button>
        <div class="language-dropdown">
            <div class="language-option" data-lang="en">English</div>
            <div class="language-option" data-lang="es">Español</div>
            <div class="language-option" data-lang="fr">Français</div>
            <div class="language-option" data-lang="de">Deutsch</div>
            <div class="language-option" data-lang="it">Italiano</div>
            <div class="language-option" data-lang="pt">Português</div>
            <div class="language-option" data-lang="ja">日本語</div>
            <div class="language-option" data-lang="ru">Pусский</div>
            <div class="language-option" data-lang="ko">한국어</div>
            <div class="language-option" data-lang="zh-CN">中文 (简体)</div>
            <div class="language-option" data-lang="zh-TW">中文 (繁體)</div>
            <div class="language-option" data-lang="ar">العربية</div>
            <div class="language-option" data-lang="fa">فارسی</div>
            <div class="language-option" data-lang="bg">Български</div>
            <div class="language-option" data-lang="ca">Català</div>
            <div class="language-option" data-lang="nl">Nederlands</div>
            <div class="language-option" data-lang="el">Ελληνικά</div>
            <div class="language-option" data-lang="hi">हिन्दी</div>
            <div class="language-option" data-lang="te">తెలుగు</div>
            <div class="language-option" data-lang="kn">ಕನ್ನಡ</div>
            <div class="language-option" data-lang="ta">தமிழ்</div>
            <div class="language-option" data-lang="ml">മലയാളം</div>
            <div class="language-option" data-lang="id">Bahasa Indonesia</div>
            <div class="language-option" data-lang="ms">Bahasa Melayu</div>
            <div class="language-option" data-lang="pl">Polski</div>
            <div class="language-option" data-lang="th">ภาษาไทย</div>
            <div class="language-option" data-lang="tr">Türkçe</div>
            <div class="language-option" data-lang="uk">Українська</div>
            <div class="language-option" data-lang="vi">Tiếng Việt</div>
            <div class="language-option" data-lang="is">Íslenska</div>
            <div class="language-option" data-lang="no">Norsk</div>
            <div class="language-option" data-lang="sv">Svenska</div>
            <div class="language-option" data-lang="fi">Suomi</div>
            <div class="language-option" data-lang="cs">Čeština</div>
        </div>
    </div>

    <script>
        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        
        // Check for saved theme preference or respect OS preference
        const savedTheme = localStorage.getItem('theme') || 
            (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        
        if (savedTheme === 'dark') {
            body.classList.add('dark-mode');
            themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        }
        
        themeToggle.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            const isDarkMode = body.classList.contains('dark-mode');
            
            if (isDarkMode) {
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                localStorage.setItem('theme', 'dark');
            } else {
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                localStorage.setItem('theme', 'light');
            }
        });

        // Mobile Menu Toggle
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mobileMenu = document.getElementById('mobileMenu');
        
        mobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('active');
            
            // Change icon based on menu state
            if (mobileMenu.classList.contains('active')) {
                mobileMenuBtn.innerHTML = '<i class="fas fa-times"></i>';
            } else {
                mobileMenuBtn.innerHTML = '<i class="fas fa-bars"></i>';
            }
        });

        // Close mobile menu when clicking on a link
        const mobileMenuLinks = mobileMenu.querySelectorAll('a');
        mobileMenuLinks.forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.remove('active');
                mobileMenuBtn.innerHTML = '<i class="fas fa-bars"></i>';
            });
        });

        // Tab Navigation
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const tabId = btn.getAttribute('data-tab');
                
                // Update active tab button
                tabBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                // Update active tab content
                tabContents.forEach(content => {
                    content.classList.remove('active');
                    if (content.id === tabId) {
                        content.classList.add('active');
                    }
                });
            });
        });

        // Unit Toggle
        const metricBtn = document.getElementById('metricBtn');
        const imperialBtn = document.getElementById('imperialBtn');
        const metricInputs = document.getElementById('metricInputs');
        const imperialInputs = document.getElementById('imperialInputs');
        
        metricBtn.addEventListener('click', () => {
            metricBtn.classList.add('active');
            imperialBtn.classList.remove('active');
            metricInputs.style.display = 'block';
            imperialInputs.style.display = 'none';
            
            // Update small unit buttons
            document.querySelectorAll('.unit-btn-small[data-unit="kg"]').forEach(btn => {
                btn.classList.add('active');
            });
            document.querySelectorAll('.unit-btn-small[data-unit="lbs"]').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.unit-btn-small[data-unit="cm"]').forEach(btn => {
                btn.classList.add('active');
            });
            document.querySelectorAll('.unit-btn-small[data-unit="ft"]').forEach(btn => {
                btn.classList.remove('active');
            });
        });
        
        imperialBtn.addEventListener('click', () => {
            imperialBtn.classList.add('active');
            metricBtn.classList.remove('active');
            imperialInputs.style.display = 'block';
            metricInputs.style.display = 'none';
            
            // Update small unit buttons
            document.querySelectorAll('.unit-btn-small[data-unit="kg"]').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.unit-btn-small[data-unit="lbs"]').forEach(btn => {
                btn.classList.add('active');
            });
            document.querySelectorAll('.unit-btn-small[data-unit="cm"]').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.unit-btn-small[data-unit="ft"]').forEach(btn => {
                btn.classList.add('active');
            });
        });

        // Small unit button functionality
        document.querySelectorAll('.unit-btn-small').forEach(btn => {
            btn.addEventListener('click', function() {
                const unit = this.getAttribute('data-unit');
                const isMetric = metricBtn.classList.contains('active');
                
                // Toggle between metric and imperial
                if (unit === 'kg' || unit === 'cm') {
                    metricBtn.click();
                } else if (unit === 'lbs' || unit === 'ft') {
                    imperialBtn.click();
                }
            });
        });

        // BMI Calculator
        const calculateBtn = document.getElementById('calculateBtn');
        const resetBtn = document.getElementById('resetBtn');
        const bmiResult = document.getElementById('bmiResult');
        const bmiValue = document.getElementById('bmiValue');
        const bmiCategory = document.getElementById('bmiCategory');
        const bmiProgress = document.getElementById('bmiProgress');
        const bmiAdvice = document.getElementById('bmiAdvice');
        const healthTips = document.getElementById('healthTips');
        const healthTipsList = document.getElementById('healthTipsList');
        const dynamicGutTips = document.getElementById('dynamicGutTips');
        const idealWeightContainer = document.getElementById('idealWeightContainer');
        const idealWeightValue = document.getElementById('idealWeightValue');
        const bmiChartContainer = document.getElementById('bmiChartContainer');
        const historyContainer = document.getElementById('historyContainer');
        const historyList = document.getElementById('historyList');
        const clearHistoryBtn = document.getElementById('clearHistoryBtn');
        
        // Input fields
        const weightKg = document.getElementById('weightKg');
        const heightCm = document.getElementById('heightCm');
        const weightLbs = document.getElementById('weightLbs');
        const heightFt = document.getElementById('heightFt');
        const heightIn = document.getElementById('heightIn');
        
        // Voice control variables
        let isVoiceOutputEnabled = false;
        let lastSpokenResult = null;
        let currentBmiCategory = null;
        let currentSpeechUtterance = null;
        let speechPausedAt = 0;
        let isSpeechPaused = false;
        
        // BMI chart
        let bmiChart = null;
        
        // BMI history
        let bmiHistory = JSON.parse(localStorage.getItem('bmiHistory')) || [];
        
        // Health tips database
        const healthTipsData = {
            general: [
                "Get 7–8 hours of quality sleep every night.",
                "Maintain balanced nutrition with fruits, vegetables, and proteins.",
                "Exercise at least 30 minutes daily.",
                "Manage stress through breathing or meditation.",
                "Avoid tobacco, alcohol, and harmful substances."
            ],
            gut: {
                Underweight: [
                    "Include calorie-dense fermented foods like full-fat yogurt and kefir to support weight gain and gut health.",
                    "Add healthy fats like avocado and nuts to meals to increase calories while supporting gut lining.",
                    "Consider probiotic supplements to help build a diverse gut microbiome during weight gain.",
                    "Eat smaller, more frequent meals to improve digestion and nutrient absorption.",
                    "Include prebiotic foods like bananas and oats to feed beneficial gut bacteria."
                ],
                Normal: [
                    "Maintain gut health with daily fermented foods like yogurt, kefir, or kimchi.",
                    "Include a variety of fiber-rich foods to support diverse gut bacteria.",
                    "Stay hydrated to support digestive function and gut lining health.",
                    "Practice mindful eating to improve digestion and nutrient absorption.",
                    "Include prebiotic foods like garlic, onions, and asparagus to feed good bacteria."
                ],
                Overweight: [
                    "Focus on fiber-rich foods to improve gut health while managing weight.",
                    "Include fermented foods with low calories like sauerkraut and kimchi.",
                    "Stay hydrated to support metabolism and gut function during weight loss.",
                    "Practice portion control with gut-friendly foods to maintain microbiome balance.",
                    "Include probiotic foods to support gut health during dietary changes."
                ],
                Obese: [
                    "Focus on high-fiber, low-calorie foods to support gut health during weight management.",
                    "Include fermented foods to help regulate gut bacteria and improve digestion.",
                    "Stay well-hydrated to support metabolic function and gut health.",
                    "Consider probiotic supplements to support gut microbiome during significant dietary changes.",
                    "Include anti-inflammatory foods to support gut lining and overall health."
                ]
            },
            bmi: {
                Underweight: [
                    "Add calorie-dense healthy meals and probiotic foods.",
                    "Focus on nutrient-rich foods like nuts, seeds, and healthy fats.",
                    "Consider smaller, more frequent meals to increase calorie intake.",
                    "Include protein-rich foods to support muscle development.",
                    "Consult a healthcare provider if you have difficulty gaining weight."
                ],
                Normal: [
                    "Maintain current habits with balanced meals.",
                    "Continue eating a variety of foods and staying active.",
                    "Focus on maintaining your healthy weight with consistent habits.",
                    "Include gut-friendly foods like fermented foods and fiber.",
                    "Regular health check-ups help maintain your wellness."
                ],
                Overweight: [
                    "Reduce refined sugar and boost activity.",
                    "Focus on portion control and incorporate more vegetables.",
                    "Include lean proteins to help you feel full longer.",
                    "Aim for gradual weight loss of 1-2 pounds per week.",
                    "Consider consulting a nutritionist for personalized advice."
                ],
                Obese: [
                    "Prioritize portion control and medical guidance.",
                    "Focus on sustainable lifestyle changes rather than quick fixes.",
                    "Incorporate both cardio and strength training exercises.",
                    "Consider keeping a food diary to track eating habits.",
                    "Seek support from healthcare professionals for a comprehensive plan."
                ]
            }
        };
        
        // Real-time BMI calculation
        function setupRealTimeCalculation() {
            // Add event listeners to all input fields
            const inputs = [weightKg, heightCm, weightLbs, heightFt, heightIn];
            
            inputs.forEach(input => {
                input.addEventListener('input', () => {
                    // Only calculate if we have valid values
                    if (hasValidInputs()) {
                        calculateBMI();
                    } else {
                        // If inputs are deleted, stop voice output and hide results
                        stopVoiceOutput();
                        bmiResult.classList.remove('active');
                        healthTips.classList.remove('active');
                        idealWeightContainer.style.display = 'none';
                        bmiChartContainer.style.display = 'none';
                        historyContainer.style.display = 'none';
                    }
                });
            });
        }
        
        // Check if we have valid inputs
        function hasValidInputs() {
            if (metricBtn.classList.contains('active')) {
                return weightKg.value && heightCm.value && 
                       parseFloat(weightKg.value) > 0 && parseFloat(heightCm.value) > 0;
            } else {
                return weightLbs.value && heightFt.value && 
                       parseFloat(weightLbs.value) > 0 && parseFloat(heightFt.value) > 0;
            }
        }
        
        // Stop voice output
        function stopVoiceOutput() {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
            }
            isVoiceOutputEnabled = false;
            isSpeechPaused = false;
            speechPausedAt = 0;
            currentSpeechUtterance = null;
        }
        
        // Pause voice output
        function pauseVoiceOutput() {
            if ('speechSynthesis' in window && window.speechSynthesis.speaking && !isSpeechPaused) {
                window.speechSynthesis.pause();
                isSpeechPaused = true;
                speechPausedAt = Date.now();
            }
        }
        
        // Resume voice output
        function resumeVoiceOutput() {
            if ('speechSynthesis' in window && isSpeechPaused) {
                window.speechSynthesis.resume();
                isSpeechPaused = false;
            }
        }
        
        // Calculate BMI
        function calculateBMI() {
            let weight, height, bmi;
            
            if (metricBtn.classList.contains('active')) {
                // Metric calculation
                weight = parseFloat(weightKg.value);
                height = parseFloat(heightCm.value) / 100; // Convert cm to m
                
                if (!weight || !height || weight <= 0 || height <= 0) {
                    return;
                }
                
                bmi = weight / (height * height);
            } else {
                // Imperial calculation
                const lbs = parseFloat(weightLbs.value);
                const feet = parseFloat(heightFt.value);
                const inches = parseFloat(heightIn.value) || 0;
                
                if (!lbs || !feet || lbs <= 0 || feet <= 0) {
                    return;
                }
                
                // Convert to metric for calculation
                weight = lbs * 0.453592; // lbs to kg
                height = (feet * 12 + inches) * 0.0254; // feet+inches to meters
                
                bmi = weight / (height * height);
            }
            
            // Round to 1 decimal place
            bmi = Math.round(bmi * 10) / 10;
            
            // Determine category
            let category, color, advice;
            
            if (bmi < 18.5) {
                category = 'Underweight';
                color = 'var(--underweight-color)';
            } else if (bmi < 25) {
                category = 'Normal';
                color = 'var(--normal-color)';
            } else if (bmi < 30) {
                category = 'Overweight';
                color = 'var(--overweight-color)';
            } else {
                category = 'Obese';
                color = 'var(--obese-color)';
            }
            
            // Store current BMI category
            currentBmiCategory = category;
            
            // Get advice
            const categoryTips = healthTipsData.bmi[category] || [];
            const randomTip = categoryTips[Math.floor(Math.random() * categoryTips.length)] || 'Maintain a balanced diet and regular exercise.';
            
            // Add gut health tip
            const gutTips = healthTipsData.gut[category] || [];
            const gutTip = gutTips[Math.floor(Math.random() * gutTips.length)] || 'Include fermented foods in your diet for better gut health.';
            advice = `${randomTip} Also, for gut health: ${gutTip}`;
            
            // Update UI
            bmiValue.textContent = bmi;
            bmiCategory.textContent = category;
            bmiCategory.style.color = color;
            bmiProgress.style.width = `${Math.min(bmi, 40) * 2.5}%`;
            bmiProgress.style.backgroundColor = color;
            bmiAdvice.textContent = advice;
            
            // Show result
            bmiResult.classList.add('active');
            healthTips.classList.add('active');
            idealWeightContainer.style.display = 'block';
            bmiChartContainer.style.display = 'block';
            historyContainer.style.display = 'block';
            
            // Calculate and display ideal weight range
            calculateIdealWeight(height);
            
            // Update health tips
            updateHealthTips(category);
            
            // Update gut tips in Healthy Gut tab
            updateGutTips(category);
            
            // Update BMI chart
            updateBmiChart(bmi, category);
            
            // Add to history
            addToHistory(bmi, category);
            
            // Speak result only if Calculate button was clicked
            if (isVoiceOutputEnabled) {
                const resultString = `Your BMI is ${bmi}. You are in the ${category} category. ${advice}`;
                
                // Only speak if this is a new result
                if (resultString !== lastSpokenResult) {
                    speakResult(resultString);
                    lastSpokenResult = resultString;
                }
            }
        }
        
        // Calculate ideal weight range
        function calculateIdealWeight(height) {
            // Calculate ideal BMI range (18.5 to 24.9)
            const minWeight = 18.5 * height * height;
            const maxWeight = 24.9 * height * height;
            
            // Round to 1 decimal place
            const roundedMin = Math.round(minWeight * 10) / 10;
            const roundedMax = Math.round(maxWeight * 10) / 10;
            
            idealWeightValue.textContent = `${roundedMin} - ${roundedMax} kg`;
        }
        
        // Update BMI chart
        function updateBmiChart(bmi, category) {
            const ctx = document.getElementById('bmiChart').getContext('2d');
            
            // Destroy existing chart if it exists
            if (bmiChart) {
                bmiChart.destroy();
            }
            
            // Create new chart
            bmiChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Your BMI'],
                    datasets: [{
                        label: 'Your BMI',
                        data: [bmi],
                        backgroundColor: getCategoryColor(category),
                        borderColor: getCategoryColor(category),
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'BMI Value'
                            },
                            max: Math.max(bmi + 5, 30)
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Your BMI Result'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `Your BMI: ${bmi} (${category})`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Helper function to get category color
        function getCategoryColor(category) {
            switch(category) {
                case 'Underweight': return 'rgba(59, 130, 246, 0.7)';
                case 'Normal': return 'rgba(16, 185, 129, 0.7)';
                case 'Overweight': return 'rgba(245, 158, 11, 0.7)';
                case 'Obese': return 'rgba(239, 68, 68, 0.7)';
                default: return 'rgba(147, 112, 219, 0.7)';
            }
        }
        
        // Add BMI to history
        function addToHistory(bmi, category) {
            const now = new Date();
            const dateString = now.toLocaleDateString() + ' ' + now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            
            bmiHistory.unshift({
                date: dateString,
                bmi: bmi,
                category: category
            });
            
            // Keep only last 10 entries
            if (bmiHistory.length > 10) {
                bmiHistory = bmiHistory.slice(0, 10);
            }
            
            // Save to localStorage
            localStorage.setItem('bmiHistory', JSON.stringify(bmiHistory));
            
            // Update history display
            updateHistoryDisplay();
        }
        
        // Update history display
        function updateHistoryDisplay() {
            historyList.innerHTML = '';
            
            bmiHistory.forEach(entry => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `
                    <div class="history-date">${entry.date}</div>
                    <div class="history-bmi">${entry.bmi} (${entry.category})</div>
                `;
                historyList.appendChild(historyItem);
            });
        }
        
        // Clear history
        clearHistoryBtn.addEventListener('click', () => {
            bmiHistory = [];
            localStorage.setItem('bmiHistory', JSON.stringify(bmiHistory));
            updateHistoryDisplay();
        });
        
        // Initialize history display
        updateHistoryDisplay();
        
        // Speak result using speech synthesis
        function speakResult(text) {
            if ('speechSynthesis' in window) {
                // Stop any current speech
                stopVoiceOutput();
                
                currentSpeechUtterance = new SpeechSynthesisUtterance();
                currentSpeechUtterance.text = text;
                currentSpeechUtterance.rate = 0.9;
                currentSpeechUtterance.onend = () => {
                    // Reset voice output flag after speaking
                    isVoiceOutputEnabled = false;
                    isSpeechPaused = false;
                    speechPausedAt = 0;
                    currentSpeechUtterance = null;
                };
                window.speechSynthesis.speak(currentSpeechUtterance);
            }
        }
        
        // Update health tips based on BMI category
        function updateHealthTips(category) {
            // Clear existing tips
            healthTipsList.innerHTML = '';
            
            // Get tips for this category
            const categoryTips = healthTipsData.bmi[category] || [];
            const generalTips = healthTipsData.general;
            const gutTips = healthTipsData.gut[category] || [];
            
            // Combine tips (2 from category, 1 general, 1 gut)
            const allTips = [
                ...categoryTips.slice(0, 2),
                generalTips[Math.floor(Math.random() * generalTips.length)],
                gutTips[Math.floor(Math.random() * gutTips.length)]
            ];
            
            // Add tips to the list
            allTips.forEach(tip => {
                const tipElement = document.createElement('div');
                tipElement.className = 'health-tip';
                tipElement.innerHTML = `
                    <div class="health-tip-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="health-tip-content">
                        <div class="health-tip-title">Health Tip</div>
                        <div class="health-tip-description">${tip}</div>
                    </div>
                `;
                healthTipsList.appendChild(tipElement);
            });
        }
        
        // Update gut tips based on BMI category
        function updateGutTips(category) {
            // Clear existing tips
            dynamicGutTips.innerHTML = '';
            
            // Get gut tips for this category
            const gutTips = healthTipsData.gut[category] || [];
            
            // Add tips to the gut section
            gutTips.forEach((tip, index) => {
                const tipElement = document.createElement('div');
                tipElement.className = 'gut-tip-card';
                tipElement.innerHTML = `
                    <h4 class="gut-tip-title"><i class="fas fa-heartbeat"></i> <span>Gut Health Tip ${index + 1}</span></h4>
                    <p class="gut-tip-content">${tip}</p>
                `;
                dynamicGutTips.appendChild(tipElement);
            });
            
            // If no specific gut tips for this category, show general gut tips
            if (gutTips.length === 0) {
                const generalGutTips = [
                    "Include fermented foods like yogurt, kefir, and kimchi in your diet.",
                    "Eat plenty of fiber-rich fruits, vegetables, and whole grains.",
                    "Stay hydrated to support digestive function.",
                    "Manage stress through meditation or deep breathing exercises.",
                    "Get regular exercise to support gut motility."
                ];
                
                generalGutTips.forEach((tip, index) => {
                    const tipElement = document.createElement('div');
                    tipElement.className = 'gut-tip-card';
                    tipElement.innerHTML = `
                        <h4 class="gut-tip-title"><i class="fas fa-heartbeat"></i> <span>General Gut Health Tip ${index + 1}</span></h4>
                        <p class="gut-tip-content">${tip}</p>
                    `;
                    dynamicGutTips.appendChild(tipElement);
                });
            }
        }
        
        // Reset form
        resetBtn.addEventListener('click', () => {
            weightKg.value = '';
            heightCm.value = '';
            weightLbs.value = '';
            heightFt.value = '';
            heightIn.value = '';
            bmiResult.classList.remove('active');
            healthTips.classList.remove('active');
            idealWeightContainer.style.display = 'none';
            bmiChartContainer.style.display = 'none';
            historyContainer.style.display = 'none';
            
            // Stop any ongoing voice output
            stopVoiceOutput();
            isVoiceOutputEnabled = false;
            lastSpokenResult = null;
            currentBmiCategory = null;
            
            // Reset gut tips to default
            updateGutTips('Normal');
            
            // Destroy chart if it exists
            if (bmiChart) {
                bmiChart.destroy();
                bmiChart = null;
            }
        });
        
        // Calculate button click handler
        calculateBtn.addEventListener('click', () => {
            if (hasValidInputs()) {
                // Enable voice output only when Calculate button is clicked
                isVoiceOutputEnabled = true;
                calculateBMI();
            } else {
                alert('Please enter valid weight and height values.');
            }
        });
        
        // Initialize real-time calculation
        setupRealTimeCalculation();
        
        // Voice Control - FIXED VERSION
        const voiceBtn = document.getElementById('voiceBtn');
        const stopVoiceBtn = document.getElementById('stopVoiceBtn');
        const pauseVoiceBtn = document.getElementById('pauseVoiceBtn');
        const resumeVoiceBtn = document.getElementById('resumeVoiceBtn');
        const voiceStatus = document.getElementById('voiceStatus');
        
        let recognition = null;
        let isListening = false;
        let recognitionTimeout = null;
        let permissionRequested = false;
        
        // Initialize speech recognition
        function initializeSpeechRecognition() {
            // Check browser support
            if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                voiceStatus.textContent = 'Speech recognition not supported in this browser.';
                voiceBtn.disabled = true;
                return false;
            }
            
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            
            // Configure recognition settings for better accuracy
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = 'en-US';
            recognition.maxAlternatives = 1; // Get only the best result
            
            // Event handlers
            recognition.onstart = () => {
                isListening = true;
                voiceBtn.style.display = 'none';
                stopVoiceBtn.style.display = 'inline-flex';
                pauseVoiceBtn.style.display = 'inline-flex';
                voiceStatus.textContent = 'Listening... Speak now.';
                voiceBtn.classList.add('listening');
                
                // Set timeout to automatically stop after 25 seconds
                recognitionTimeout = setTimeout(() => {
                    if (isListening) {
                        stopListening();
                        voiceStatus.textContent = 'Listening timed out after 25 seconds. Click the microphone to try again.';
                    }
                }, 25000); // 25 seconds timeout
            };
            
            recognition.onresult = (event) => {
                clearTimeout(recognitionTimeout);
                
                // Get the transcript
                const transcript = event.results[0][0].transcript.toLowerCase();
                
                // Fixed confidence calculation - some browsers don't provide confidence
                const confidence = event.results[0][0].confidence || 0.8; // Default to 80% if not provided
                
                voiceStatus.textContent = `Heard: "${transcript}" (${Math.round(confidence * 100)}% confidence)`;
                processVoiceCommand(transcript);
            };
            
            recognition.onerror = (event) => {
                clearTimeout(recognitionTimeout);
                console.error('Speech recognition error', event.error);
                
                let errorMessage = 'Error: ';
                switch(event.error) {
                    case 'no-speech':
                        errorMessage += 'No speech was detected.';
                        break;
                    case 'audio-capture':
                        errorMessage += 'No microphone was found.';
                        break;
                    case 'not-allowed':
                        errorMessage += 'Microphone permission was denied.';
                        permissionRequested = true;
                        break;
                    case 'network':
                        errorMessage += 'Network error occurred.';
                        break;
                    default:
                        errorMessage += event.error;
                }
                
                voiceStatus.textContent = errorMessage;
                stopListening();
            };
            
            recognition.onend = () => {
                clearTimeout(recognitionTimeout);
                if (isListening) {
                    // If recognition ended but we're still supposed to be listening, restart it
                    setTimeout(() => {
                        if (isListening) {
                            try {
                                recognition.start();
                            } catch (error) {
                                console.error('Error restarting speech recognition:', error);
                                stopListening();
                                voiceStatus.textContent = 'Error restarting voice recognition. Please try again.';
                            }
                        }
                    }, 500);
                } else {
                    voiceBtn.style.display = 'inline-flex';
                    stopVoiceBtn.style.display = 'none';
                    pauseVoiceBtn.style.display = 'none';
                    resumeVoiceBtn.style.display = 'none';
                    voiceBtn.classList.remove('listening');
                }
            };
            
            return true;
        }
        
        // Start listening function
        function startListening() {
            if (!recognition) {
                if (!initializeSpeechRecognition()) {
                    return;
                }
            }
            
            if (!isListening) {
                try {
                    recognition.start();
                    permissionRequested = true;
                } catch (error) {
                    console.error('Error starting speech recognition:', error);
                    voiceStatus.textContent = 'Error starting voice recognition. Please try again.';
                    
                    // Try to reinitialize if there's an error
                    setTimeout(() => {
                        initializeSpeechRecognition();
                        startListening();
                    }, 1000);
                }
            }
        }
        
        // Stop listening function
        function stopListening() {
            if (recognition && isListening) {
                try {
                    recognition.stop();
                } catch (error) {
                    console.error('Error stopping speech recognition:', error);
                }
                isListening = false;
                voiceBtn.style.display = 'inline-flex';
                stopVoiceBtn.style.display = 'none';
                pauseVoiceBtn.style.display = 'none';
                resumeVoiceBtn.style.display = 'none';
                voiceStatus.textContent = 'Voice input stopped. Click the microphone to start again.';
                voiceBtn.classList.remove('listening');
            }
        }
        
        // Process voice commands with improved accuracy
        function processVoiceCommand(transcript) {
            // Check for voice output control commands first
            if (transcript.includes('stop') || transcript.includes('pause')) {
                pauseVoiceOutput();
                pauseVoiceBtn.style.display = 'none';
                resumeVoiceBtn.style.display = 'inline-flex';
                voiceStatus.textContent = 'Voice output paused. Say "continue" to resume.';
                return;
            }
            
            if (transcript.includes('continue') || transcript.includes('resume')) {
                resumeVoiceOutput();
                resumeVoiceBtn.style.display = 'none';
                pauseVoiceBtn.style.display = 'inline-flex';
                voiceStatus.textContent = 'Voice output resumed.';
                return;
            }
            
            // Extract numbers from the transcript with improved pattern matching
            const numberPattern = /\d+(\.\d+)?/g;
            const numbers = transcript.match(numberPattern);
            
            // Check if using metric or imperial
            const isMetric = metricBtn.classList.contains('active');
            
            // Improved command processing with better pattern matching
            if (isMetric) {
                // For metric system
                processMetricCommand(transcript, numbers);
            } else {
                // For imperial system
                processImperialCommand(transcript, numbers);
            }
            
            // Check for calculate command
            if (transcript.includes('calculate') || transcript.includes('compute') || 
                transcript.includes('bmi') || transcript.includes('result')) {
                setTimeout(() => {
                    isVoiceOutputEnabled = true;
                    calculateBMI();
                }, 500);
            }
            
            // Check for reset command
            if (transcript.includes('reset') || transcript.includes('clear') || 
                transcript.includes('start over')) {
                setTimeout(() => {
                    resetBtn.click();
                }, 500);
            }
        }
        
        // Process metric system voice commands
        function processMetricCommand(transcript, numbers) {
            if (!numbers || numbers.length === 0) return;
            
            // Pattern for weight and height in metric
            const weightPattern = /(\d+(?:\.\d+)?)\s*(?:kilos?|kilograms?|kg)/i;
            const heightPattern = /(\d+(?:\.\d+)?)\s*(?:centimeters?|cm|meters?|m)/i;
            
            const weightMatch = transcript.match(weightPattern);
            const heightMatch = transcript.match(heightPattern);
            
            // If specific patterns found, use them
            if (weightMatch && weightMatch[1]) {
                weightKg.value = parseFloat(weightMatch[1]);
                voiceStatus.textContent = `Set weight to ${weightMatch[1]} kg`;
            }
            
            if (heightMatch && heightMatch[1]) {
                let heightValue = parseFloat(heightMatch[1]);
                // Convert meters to centimeters if needed
                if (transcript.includes('meter') || transcript.includes('m ') && !transcript.includes('cm')) {
                    heightValue = heightValue * 100;
                }
                heightCm.value = heightValue;
                voiceStatus.textContent = `Set height to ${heightValue} cm`;
            }
            
            // If no specific patterns but we have numbers, use positional logic
            if (!weightMatch && !heightMatch && numbers.length >= 2) {
                // Assume first number is weight, second is height
                weightKg.value = parseFloat(numbers[0]);
                heightCm.value = parseFloat(numbers[1]);
                voiceStatus.textContent = `Set weight to ${numbers[0]} kg and height to ${numbers[1]} cm`;
            }
            
            // Auto-calculate if we have both weight and height
            if (weightKg.value && heightCm.value) {
                setTimeout(() => {
                    isVoiceOutputEnabled = true;
                    calculateBMI();
                }, 1000);
            }
        }
        
        // Process imperial system voice commands
        function processImperialCommand(transcript, numbers) {
            if (!numbers || numbers.length === 0) return;
            
            // Pattern for weight in imperial
            const weightPattern = /(\d+(?:\.\d+)?)\s*(?:pounds?|lbs?)/i;
            const weightMatch = transcript.match(weightPattern);
            
            // Pattern for height in feet and inches
            const feetPattern = /(\d+)\s*(?:feet|ft|foot)/i;
            const inchesPattern = /(\d+)\s*(?:inches?|in)/i;
            const heightPattern = /(\d+)\s*(?:feet|ft|foot)\s*(\d+)?\s*(?:inches?|in)?/i;
            
            const feetMatch = transcript.match(feetPattern);
            const inchesMatch = transcript.match(inchesPattern);
            const heightMatch = transcript.match(heightPattern);
            
            // Process weight
            if (weightMatch && weightMatch[1]) {
                weightLbs.value = parseFloat(weightMatch[1]);
                voiceStatus.textContent = `Set weight to ${weightMatch[1]} lbs`;
            } else if (numbers.length > 0 && (transcript.includes('pound') || transcript.includes('lb'))) {
                weightLbs.value = parseFloat(numbers[0]);
                voiceStatus.textContent = `Set weight to ${numbers[0]} lbs`;
            }
            
            // Process height
            if (heightMatch) {
                heightFt.value = parseFloat(heightMatch[1]);
                if (heightMatch[2]) {
                    heightIn.value = parseFloat(heightMatch[2]);
                    voiceStatus.textContent = `Set height to ${heightMatch[1]} feet ${heightMatch[2]} inches`;
                } else {
                    heightIn.value = 0;
                    voiceStatus.textContent = `Set height to ${heightMatch[1]} feet`;
                }
            } else if (feetMatch && inchesMatch) {
                heightFt.value = parseFloat(feetMatch[1]);
                heightIn.value = parseFloat(inchesMatch[1]);
                voiceStatus.textContent = `Set height to ${feetMatch[1]} feet ${inchesMatch[1]} inches`;
            } else if (feetMatch) {
                heightFt.value = parseFloat(feetMatch[1]);
                heightIn.value = 0;
                voiceStatus.textContent = `Set height to ${feetMatch[1]} feet`;
            } else if (inchesMatch && numbers.length >= 2) {
                // If only inches mentioned but we have multiple numbers
                heightFt.value = parseFloat(numbers[0]);
                heightIn.value = parseFloat(inchesMatch[1]);
                voiceStatus.textContent = `Set height to ${numbers[0]} feet ${inchesMatch[1]} inches`;
            }
            
            // Auto-calculate if we have both weight and height
            if (weightLbs.value && heightFt.value) {
                setTimeout(() => {
                    isVoiceOutputEnabled = true;
                    calculateBMI();
                }, 1000);
            }
        }
        
        // Initialize voice recognition
        voiceBtn.addEventListener('click', () => {
            startListening();
        });
        
        stopVoiceBtn.addEventListener('click', () => {
            stopListening();
        });
        
        pauseVoiceBtn.addEventListener('click', () => {
            pauseVoiceOutput();
            pauseVoiceBtn.style.display = 'none';
            resumeVoiceBtn.style.display = 'inline-flex';
            voiceStatus.textContent = 'Voice output paused. Say "continue" to resume.';
        });
        
        resumeVoiceBtn.addEventListener('click', () => {
            resumeVoiceOutput();
            resumeVoiceBtn.style.display = 'none';
            pauseVoiceBtn.style.display = 'inline-flex';
            voiceStatus.textContent = 'Voice output resumed.';
        });
        
        // Initialize speech recognition on page load
        document.addEventListener('DOMContentLoaded', () => {
            initializeSpeechRecognition();
        });

        // Language Switcher
        const languageBtn = document.querySelector('.language-btn');
        const currentLanguageElement = document.getElementById('currentLanguage');
        const languageDropdown = document.querySelector('.language-dropdown');
        
        const languages = [
            { code: 'en', name: 'English' },
            { code: 'es', name: 'Español' },
            { code: 'fr', name: 'Français' },
            { code: 'de', name: 'Deutsch' },
            { code: 'it', name: 'Italiano' },
            { code: 'pt', name: 'Português' },
            { code: 'ja', name: '日本語' },
            { code: 'ru', name: 'Pусский' },
            { code: 'ko', name: '한국어' },
            { code: 'zh-CN', name: '中文 (简体)' },
            { code: 'zh-TW', name: '中文 (繁體)' },
            { code: 'ar', name: 'العربية' },
            { code: 'fa', name: 'فارسی' },
            { code: 'bg', name: 'Български' },
            { code: 'ca', name: 'Català' },
            { code: 'nl', name: 'Nederlands' },
            { code: 'el', name: 'Ελληνικά' },
            { code: 'hi', name: 'हिन्दी' },
            { code: 'te', name: 'తెలుగు' },
            { code: 'kn', name: 'ಕನ್ನಡ' },
            { code: 'ta', name: 'தமிழ்' },
            { code: 'ml', name: 'മലയാളം' },
            { code: 'id', name: 'Bahasa Indonesia' },
            { code: 'ms', name: 'Bahasa Melayu' },
            { code: 'pl', name: 'Polski' },
            { code: 'th', name: 'ภาษาไทย' },
            { code: 'tr', name: 'Türkçe' },
            { code: 'uk', name: 'Українська' },
            { code: 'vi', name: 'Tiếng Việt' },
            { code: 'is', name: 'Íslenska' },
            { code: 'no', name: 'Norsk' },
            { code: 'sv', name: 'Svenska' },
            { code: 'fi', name: 'Suomi' },
            { code: 'cs', name: 'Čeština' }
        ];

        // Translation data
        const translations = {
            en: {
                "nav.home": "Home",
                "nav.about": "About Us",
                "nav.tools": "Tools",
                "nav.contact": "Contact",
                "hero.title": "BMI Calculator & Healthy Gut",
                "hero.description": "Calculate your BMI in real-time, get personalized health advice, and learn how to improve your gut health. All processing happens locally with complete privacy.",
                "howto.title": "How to Use the Health Tool",
                "howto.step1.title": "Calculate Your BMI",
                "howto.step1.description": "Enter your height and weight using either metric or imperial units. The tool will instantly calculate your BMI and show your health category.",
                "howto.step2.title": "Use Voice Control",
                "howto.step2.description": "Click the microphone button and speak your measurements. The tool will recognize your voice and input the values automatically.",
                "howto.step3.title": "Get Health Advice",
                "howto.step3.description": "Based on your BMI, receive personalized advice for improving your health, with a special focus on gut health and overall wellness.",
                "howto.step4.title": "Learn About Gut Health",
                "howto.step4.description": "Explore our collection of gut health tips and lifestyle recommendations to improve your digestive health and overall well-being.",
                "tool.title": "BMI Calculator & Healthy Gut",
                "tool.tabs.bmi": "BMI Calculator",
                "tool.tabs.gut": "Healthy Gut",
                "tool.bmi.weight": "Weight:",
                "tool.bmi.height": "Height:",
                "tool.bmi.calculate": "Calculate BMI",
                "tool.bmi.reset": "Reset",
                "tool.tips.title": "Personalized Health Tips",
                "tool.voice.title": "Voice Control",
                "tool.voice.description": "Click the microphone and speak your measurements",
                "tool.voice.start": "Start Voice Input",
                "tool.voice.stop": "Stop Voice Input",
                "tool.voice.pause": "Pause Output",
                "tool.voice.resume": "Resume Output",
                "tool.gut.title": "Improve Your Gut Health",
                "tool.gut.description": "A healthy gut is essential for overall wellness. Here are some tips to improve your digestive health:",
                "footer.follow": "FOLLOW US",
                "footer.categories": "Popular Categories",
                "footer.categories.pdf": "PDF Tools",
                "footer.categories.image": "Image Tools",
                "footer.categories.text": "Text Tools",
                "footer.categories.av": "Audio/Video Tools",
                "footer.categories.web": "WebDeveloper Tools",
                "footer.categories.calc": "Calculator Tools",
                "footer.categories.util": "Utility Tools",
                "footer.categories.color": "Color Tools",
                "footer.quicklinks": "Quick Links",
                "footer.links.tools": "All Tools",
                "footer.links.faq": "FAQ",
                "footer.links.contact": "Contact",
                "footer.links.privacy": "Privacy Policy",
                "footer.links.disclaimer": "Disclaimer",
                "footer.links.terms": "Terms of Service",
                "footer.copyright": "© 2025 LollyPoPDF. All rights reserved."
            },
            es: {
                "nav.home": "Inicio",
                "nav.about": "Sobre Nosotros",
                "nav.tools": "Herramientas",
                "nav.contact": "Contacto",
                "hero.title": "Calculadora de IMC e Intestino Sano",
                "hero.description": "Calcula tu IMC en tiempo real, recibe consejos de salud personalizados y aprende a mejorar tu salud intestinal. Todo el procesamiento ocurre localmente con privacidad completa.",
                "howto.title": "Cómo Usar la Herramienta de Salud",
                "howto.step1.title": "Calcula Tu IMC",
                "howto.step1.description": "Ingresa tu altura y peso usando unidades métricas o imperiales. La herramienta calculará instantáneamente tu IMC y mostrará tu categoría de salud.",
                "howto.step2.title": "Usa Control de Voz",
                "howto.step2.description": "Haz clic en el botón del micrófono y di tus medidas. La herramienta reconocerá tu voz e ingresará los valores automáticamente.",
                "howto.step3.title": "Obtén Consejos de Salud",
                "howto.step3.description": "Según tu IMC, recibe consejos personalizados para mejorar tu salud, con un enfoque especial en la salud intestinal y el bienestar general.",
                "howto.step4.title": "Aprende Sobre Salud Intestinal",
                "howto.step4.description": "Explora nuestra colección de consejos de salud intestinal y recomendaciones de estilo de vida para mejorar tu salud digestiva y bienestar general.",
                "tool.title": "Calculadora de IMC e Intestino Sano",
                "tool.tabs.bmi": "Calculadora de IMC",
                "tool.tabs.gut": "Intestino Sano",
                "tool.bmi.weight": "Peso:",
                "tool.bmi.height": "Altura:",
                "tool.bmi.calculate": "Calcular IMC",
                "tool.bmi.reset": "Reiniciar",
                "tool.tips.title": "Consejos de Salud Personalizados",
                "tool.voice.title": "Control de Voz",
                "tool.voice.description": "Haz clic en el micrófono y di tus medidas",
                "tool.voice.start": "Iniciar Entrada de Voz",
                "tool.voice.stop": "Detener Entrada de Voz",
                "tool.voice.pause": "Pausar Salida",
                "tool.voice.resume": "Reanudar Salida",
                "tool.gut.title": "Mejora Tu Salud Intestinal",
                "tool.gut.description": "Un intestino sano es esencial para el bienestar general. Aquí hay algunos consejos para mejorar tu salud digestiva:",
                "footer.follow": "SÍGUENOS",
                "footer.categories": "Categorías Populares",
                "footer.categories.pdf": "Herramientas PDF",
                "footer.categories.image": "Herramientas de Imagen",
                "footer.categories.text": "Herramientas de Texto",
                "footer.categories.av": "Herramientas de Audio/Video",
                "footer.categories.web": "Herramientas WebDesarrollador",
                "footer.categories.calc": "Herramientas de Calculadora",
                "footer.categories.util": "Herramientas de Utilidad",
                "footer.categories.color": "Herramientas de Color",
                "footer.quicklinks": "Enlaces Rápidos",
                "footer.links.tools": "Todas las Herramientas",
                "footer.links.faq": "Preguntas Frecuentes",
                "footer.links.contact": "Contacto",
                "footer.links.privacy": "Política de Privacidad",
                "footer.links.disclaimer": "Descargo de Responsabilidad",
                "footer.links.terms": "Términos de Servicio",
                "footer.copyright": "© 2025 LollyPoPDF. Todos los derechos reservados."
            }
        };

        // Function to change language
        function changeLanguage(langCode) {
            const langData = translations[langCode];
            if (!langData) return;
            
            // Update all elements with data-i18n attribute
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (langData[key]) {
                    element.textContent = langData[key];
                }
            });
            
            // Update placeholder attributes
            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                if (langData[key]) {
                    element.setAttribute('placeholder', langData[key]);
                }
            });
            
            // Update current language display
            currentLanguageElement.textContent = languages.find(lang => lang.code === langCode)?.name || 'English';
            
            // Update speech recognition language if available
            if (recognition) {
                recognition.lang = langCode;
            }
            
            // Save language preference
            localStorage.setItem('language', langCode);
        }

        // Initialize language
        const savedLanguage = localStorage.getItem('language') || 'en';
        changeLanguage(savedLanguage);
        
        // Initialize gut tips with default content
        updateGutTips('Normal');
        
        // Language selection handler
        languageDropdown.addEventListener('click', (e) => {
            if (e.target.classList.contains('language-option')) {
                const langCode = e.target.getAttribute('data-lang');
                changeLanguage(langCode);
            }
        });
    </script>
</body>
</html>
